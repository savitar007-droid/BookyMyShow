<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment & Checkout | CinemaMax - Secure Ticket Purchase</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fmovieticke7042back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.6"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-background/95 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="movie_catalog_browse.html" class="flex items-center space-x-2">
                        <svg class="w-8 h-8 text-accent" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/>
                        </svg>
                        <span class="text-xl font-heading font-bold text-text-primary">CinemaMax</span>
                    </a>
                </div>

                <!-- Security Indicators -->
                <div class="flex items-center space-x-4">
                    <div class="hidden sm:flex items-center space-x-2 text-success text-sm">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                        </svg>
                        <span>SSL Secured</span>
                    </div>
                    <div class="hidden sm:flex items-center space-x-2 text-success text-sm">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span>PCI Compliant</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Checkout Progress -->
    <div class="bg-surface/50 border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-center space-x-4 sm:space-x-8">
                <div class="flex items-center text-text-secondary">
                    <div class="w-8 h-8 rounded-full bg-success flex items-center justify-center text-white text-sm font-semibold">
                        ✓
                    </div>
                    <span class="ml-2 text-sm font-medium hidden sm:inline">Movie Selection</span>
                </div>
                <div class="w-8 sm:w-16 h-0.5 bg-success"></div>
                <div class="flex items-center text-text-secondary">
                    <div class="w-8 h-8 rounded-full bg-success flex items-center justify-center text-white text-sm font-semibold">
                        ✓
                    </div>
                    <span class="ml-2 text-sm font-medium hidden sm:inline">Seat Selection</span>
                </div>
                <div class="w-8 sm:w-16 h-0.5 bg-success"></div>
                <div class="flex items-center text-accent">
                    <div class="w-8 h-8 rounded-full bg-accent flex items-center justify-center text-white text-sm font-semibold">
                        3
                    </div>
                    <span class="ml-2 text-sm font-medium hidden sm:inline">Payment</span>
                </div>
                <div class="w-8 sm:w-16 h-0.5 bg-text-secondary/30"></div>
                <div class="flex items-center text-text-secondary">
                    <div class="w-8 h-8 rounded-full bg-text-secondary/30 flex items-center justify-center text-text-secondary text-sm font-semibold">
                        4
                    </div>
                    <span class="ml-2 text-sm font-medium hidden sm:inline">Confirmation</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Booking Summary - Left Column -->
            <div class="lg:col-span-1 order-2 lg:order-1">
                <div class="bg-surface/80 backdrop-blur-cinema rounded-cinema-lg shadow-cinema-elevated border border-white/10 sticky top-24">
                    <div class="p-6">
                        <h2 class="text-xl font-heading font-bold text-text-primary mb-6">Booking Summary</h2>
                        
                        <!-- Movie Details -->
                        <div class="flex space-x-4 mb-6">
                            <div class="w-20 h-28 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="https://images.unsplash.com/photo-1489599904472-af35ff2c7c3f?q=80&w=400&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Avengers: Endgame" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=400&auto=format&fit=crop&ixlib=rb-4.0.3'; this.onerror=null;" />
                            </div>
                            <div class="flex-1">
                                <h3 class="font-heading font-bold text-text-primary text-lg mb-1">Avengers: Endgame</h3>
                                <p class="text-text-secondary text-sm mb-2">Action, Adventure, Drama</p>
                                <div class="flex items-center space-x-2 text-sm text-text-secondary">
                                    <svg class="w-4 h-4 text-warning" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                    <span>8.4/10</span>
                                    <span>•</span>
                                    <span>181 min</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cinema & Showtime -->
                        <div class="space-y-3 mb-6 pb-6 border-b border-white/10">
                            <div class="flex items-center space-x-3">
                                <svg class="w-5 h-5 text-accent" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                </svg>
                                <div>
                                    <p class="text-text-primary font-medium">AMC Empire 25</p>
                                    <p class="text-text-secondary text-sm">234 W 42nd St, New York, NY</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <svg class="w-5 h-5 text-accent" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                                <div>
                                    <p class="text-text-primary font-medium">Today, Aug 20, 2025</p>
                                    <p class="text-text-secondary text-sm">7:30 PM - Theater 5</p>
                                </div>
                            </div>
                        </div>

                        <!-- Selected Seats -->
                        <div class="mb-6">
                            <h4 class="font-heading font-semibold text-text-primary mb-3">Selected Seats</h4>
                            <div class="bg-background/50 rounded-lg p-4 mb-4">
                                <!-- Mini Seat Map -->
                                <div class="text-center mb-3">
                                    <div class="inline-block bg-accent/20 text-accent text-xs px-3 py-1 rounded-full">SCREEN</div>
                                </div>
                                <div class="grid grid-cols-8 gap-1 max-w-48 mx-auto">
                                    <!-- Row H -->
                                    <div class="text-xs text-text-secondary text-center">H</div>
                                    <div class="w-4 h-4 bg-surface rounded-t border border-white/10"></div>
                                    <div class="w-4 h-4 bg-surface rounded-t border border-white/10"></div>
                                    <div class="w-4 h-4 bg-accent rounded-t border border-accent"></div>
                                    <div class="w-4 h-4 bg-accent rounded-t border border-accent"></div>
                                    <div class="w-4 h-4 bg-surface rounded-t border border-white/10"></div>
                                    <div class="w-4 h-4 bg-surface rounded-t border border-white/10"></div>
                                    <div class="text-xs text-text-secondary text-center">H</div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-text-secondary">Row H, Seats 4-5</span>
                                <span class="text-text-primary font-medium">2 Seats</span>
                            </div>
                        </div>

                        <!-- Price Breakdown -->
                        <div class="space-y-3">
                            <h4 class="font-heading font-semibold text-text-primary">Price Breakdown</h4>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Adult Tickets (2x)</span>
                                    <span class="text-text-primary">$28.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Convenience Fee</span>
                                    <span class="text-text-primary">$3.50</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Processing Fee</span>
                                    <span class="text-text-primary">$1.50</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Tax</span>
                                    <span class="text-text-primary">$2.64</span>
                                </div>
                                <div class="border-t border-white/10 pt-2 mt-3">
                                    <div class="flex justify-between text-lg font-semibold">
                                        <span class="text-text-primary">Total</span>
                                        <span class="text-accent">$35.64</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Form - Right Column -->
            <div class="lg:col-span-2 order-1 lg:order-2">
                <div class="bg-surface/80 backdrop-blur-cinema rounded-cinema-lg shadow-cinema-elevated border border-white/10">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-heading font-bold text-text-primary">Payment Details</h2>
                            <div class="flex items-center space-x-2 text-success text-sm">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                                </svg>
                                <span>256-bit SSL Encryption</span>
                            </div>
                        </div>

                        <!-- Payment Method Tabs -->
                        <div class="border-b border-white/10 mb-6">
                            <nav class="flex space-x-8">
                                <button id="cardTab" class="py-3 px-1 border-b-2 border-accent text-accent font-medium text-sm">
                                    Credit/Debit Card
                                </button>
                                <button id="walletTab" class="py-3 px-1 border-b-2 border-transparent text-text-secondary hover:text-text-primary font-medium text-sm transition-colors">
                                    Digital Wallets
                                </button>
                                <button id="giftTab" class="py-3 px-1 border-b-2 border-transparent text-text-secondary hover:text-text-primary font-medium text-sm transition-colors">
                                    Gift Card
                                </button>
                            </nav>
                        </div>

                        <!-- Credit Card Form -->
                        <div id="cardForm" class="space-y-6">
                            <form class="space-y-6">
                                <!-- Card Number -->
                                <div>
                                    <label for="cardNumber" class="block text-sm font-medium text-text-primary mb-2">Card Number</label>
                                    <div class="relative">
                                        <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 pr-12" maxlength="19" required />
                                        <div id="cardType" class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                            <svg class="w-8 h-5 text-text-secondary" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2zm0 2v2h16V6H4zm0 4v8h16v-8H4z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div id="cardNumberError" class="text-error text-sm mt-1 hidden">Please enter a valid card number</div>
                                </div>

                                <div class="grid grid-cols-2 gap-4">
                                    <!-- Expiry Date -->
                                    <div>
                                        <label for="expiryDate" class="block text-sm font-medium text-text-primary mb-2">Expiry Date</label>
                                        <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" maxlength="5" required />
                                        <div id="expiryError" class="text-error text-sm mt-1 hidden">Please enter a valid expiry date</div>
                                    </div>

                                    <!-- CVV -->
                                    <div>
                                        <label for="cvv" class="block text-sm font-medium text-text-primary mb-2">CVV</label>
                                        <div class="relative">
                                            <input type="text" id="cvv" name="cvv" placeholder="123" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 pr-10" maxlength="4" required />
                                            <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-text-secondary hover:text-text-primary transition-colors">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <div id="cvvError" class="text-error text-sm mt-1 hidden">Please enter a valid CVV</div>
                                    </div>
                                </div>

                                <!-- Cardholder Name -->
                                <div>
                                    <label for="cardholderName" class="block text-sm font-medium text-text-primary mb-2">Cardholder Name</label>
                                    <input type="text" id="cardholderName" name="cardholderName" placeholder="John Doe" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" required />
                                    <div id="nameError" class="text-error text-sm mt-1 hidden">Please enter the cardholder name</div>
                                </div>

                                <!-- Billing Address -->
                                <div class="border-t border-white/10 pt-6">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-lg font-heading font-semibold text-text-primary">Billing Address</h3>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="sameAsProfile" class="w-4 h-4 text-accent bg-background border-white/20 rounded focus:ring-accent focus:ring-2" checked />
                                            <span class="ml-2 text-sm text-text-secondary">Same as profile</span>
                                        </label>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="md:col-span-2">
                                            <label for="address" class="block text-sm font-medium text-text-primary mb-2">Street Address</label>
                                            <input type="text" id="address" name="address" value="123 Main Street" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" required />
                                        </div>
                                        <div>
                                            <label for="city" class="block text-sm font-medium text-text-primary mb-2">City</label>
                                            <input type="text" id="city" name="city" value="New York" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" required />
                                        </div>
                                        <div>
                                            <label for="state" class="block text-sm font-medium text-text-primary mb-2">State</label>
                                            <select id="state" name="state" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" required>
                                                <option value="NY" selected>New York</option>
                                                <option value="CA">California</option>
                                                <option value="TX">Texas</option>
                                                <option value="FL">Florida</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label for="zipCode" class="block text-sm font-medium text-text-primary mb-2">ZIP Code</label>
                                            <input type="text" id="zipCode" name="zipCode" value="10001" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" required />
                                        </div>
                                        <div>
                                            <label for="country" class="block text-sm font-medium text-text-primary mb-2">Country</label>
                                            <select id="country" name="country" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" required>
                                                <option value="US" selected>United States</option>
                                                <option value="CA">Canada</option>
                                                <option value="UK">United Kingdom</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Digital Wallets Form -->
                        <div id="walletForm" class="space-y-6 hidden">
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                <button class="flex items-center justify-center space-x-3 p-4 border border-white/20 rounded-lg bg-background hover:bg-surface transition-all duration-200">
                                    <img src="https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?q=80&w=40&auto=format&fit=crop" alt="PayPal" class="w-8 h-8" onerror="this.src='https://images.unsplash.com/photo-1611224923853-80b023f02d71?q=80&w=40&auto=format&fit=crop'; this.onerror=null;" />
                                    <span class="text-text-primary font-medium">PayPal</span>
                                </button>
                                <button class="flex items-center justify-center space-x-3 p-4 border border-white/20 rounded-lg bg-background hover:bg-surface transition-all duration-200">
                                    <img src="https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?q=80&w=40&auto=format&fit=crop" alt="Apple Pay" class="w-8 h-8" onerror="this.src='https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=40&auto=format&fit=crop'; this.onerror=null;" />
                                    <span class="text-text-primary font-medium">Apple Pay</span>
                                </button>
                                <button class="flex items-center justify-center space-x-3 p-4 border border-white/20 rounded-lg bg-background hover:bg-surface transition-all duration-200">
                                    <img src="https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?q=80&w=40&auto=format&fit=crop" alt="Google Pay" class="w-8 h-8" onerror="this.src='https://images.unsplash.com/photo-1611224923853-80b023f02d71?q=80&w=40&auto=format&fit=crop'; this.onerror=null;" />
                                    <span class="text-text-primary font-medium">Google Pay</span>
                                </button>
                            </div>
                            <div class="text-center text-text-secondary text-sm">
                                <p>Select your preferred digital wallet to complete the payment securely.</p>
                            </div>
                        </div>

                        <!-- Gift Card Form -->
                        <div id="giftForm" class="space-y-6 hidden">
                            <div>
                                <label for="giftCardNumber" class="block text-sm font-medium text-text-primary mb-2">Gift Card Number</label>
                                <input type="text" id="giftCardNumber" name="giftCardNumber" placeholder="Enter gift card number" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" />
                            </div>
                            <div>
                                <label for="giftCardPin" class="block text-sm font-medium text-text-primary mb-2">PIN</label>
                                <input type="text" id="giftCardPin" name="giftCardPin" placeholder="Enter PIN" class="w-full px-4 py-3 bg-background border border-white/20 rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200" maxlength="8" />
                            </div>
                            <button type="button" class="w-full bg-surface hover:bg-surface-700 text-text-primary font-semibold py-3 px-4 rounded-lg transition-all duration-200">
                                Check Balance
                            </button>
                        </div>

                        <!-- Guest Account Option -->
                        <div class="border-t border-white/10 pt-6 mt-6">
                            <label class="flex items-start">
                                <input type="checkbox" id="createAccount" class="w-4 h-4 text-accent bg-background border-white/20 rounded focus:ring-accent focus:ring-2 mt-1" />
                                <div class="ml-3">
                                    <span class="text-text-primary font-medium">Create an account for faster checkout</span>
                                    <p class="text-text-secondary text-sm mt-1">Save your information and track your bookings easily.</p>
                                </div>
                            </label>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="border-t border-white/10 pt-6 mt-6">
                            <label class="flex items-start">
                                <input type="checkbox" id="termsAccepted" class="w-4 h-4 text-accent bg-background border-white/20 rounded focus:ring-accent focus:ring-2 mt-1" required />
                                <div class="ml-3">
                                    <span class="text-text-primary text-sm">I agree to the 
                                        <button type="button" class="text-accent hover:text-accent-400 transition-colors underline">Terms of Service</button> 
                                        and 
                                        <button type="button" class="text-accent hover:text-accent-400 transition-colors underline">Privacy Policy</button>
                                    </span>
                                    <p class="text-text-secondary text-xs mt-1">By completing this purchase, you agree to our cancellation and refund policies.</p>
                                </div>
                            </label>
                        </div>

                        <!-- Security Notice -->
                        <div class="bg-success/10 border border-success/20 rounded-lg p-4 mt-6">
                            <div class="flex items-start space-x-3">
                                <svg class="w-5 h-5 text-success mt-0.5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                                </svg>
                                <div>
                                    <h4 class="text-success font-medium text-sm">Secure Payment</h4>
                                    <p class="text-success/80 text-xs mt-1">Your payment information is encrypted and secure. We never store your card details.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Complete Purchase Button -->
                        <button type="submit" id="completePayment" class="w-full bg-accent hover:bg-accent-600 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-surface mt-8 text-lg">
                            <span id="paymentButtonText">Complete Purchase - $35.64</span>
                            <svg id="paymentSpinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden inline" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                            </svg>
                        </button>

                        <!-- Back to Seat Selection -->
                        <div class="text-center mt-4">
                            <a href="seat_selection_booking.html" class="inline-flex items-center text-text-secondary hover:text-accent transition-colors duration-200">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                                </svg>
                                Back to Seat Selection
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success/Error Messages -->
    <div id="messageContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        // Tab switching functionality
        const cardTab = document.getElementById('cardTab');
        const walletTab = document.getElementById('walletTab');
        const giftTab = document.getElementById('giftTab');
        const cardForm = document.getElementById('cardForm');
        const walletForm = document.getElementById('walletForm');
        const giftForm = document.getElementById('giftForm');

        function switchTab(activeTab, activeForm, tabs, forms) {
            // Reset all tabs
            tabs.forEach(tab => {
                tab.classList.remove('border-accent', 'text-accent');
                tab.classList.add('border-transparent', 'text-text-secondary');
            });
            
            // Hide all forms
            forms.forEach(form => form.classList.add('hidden'));
            
            // Activate selected tab and form
            activeTab.classList.add('border-accent', 'text-accent');
            activeTab.classList.remove('border-transparent', 'text-text-secondary');
            activeForm.classList.remove('hidden');
        }

        cardTab.addEventListener('click', () => {
            switchTab(cardTab, cardForm, [cardTab, walletTab, giftTab], [cardForm, walletForm, giftForm]);
        });

        walletTab.addEventListener('click', () => {
            switchTab(walletTab, walletForm, [cardTab, walletTab, giftTab], [cardForm, walletForm, giftForm]);
        });

        giftTab.addEventListener('click', () => {
            switchTab(giftTab, giftForm, [cardTab, walletTab, giftTab], [cardForm, walletForm, giftForm]);
        });

        // Card number formatting and validation
        const cardNumberInput = document.getElementById('cardNumber');
        const cardTypeIcon = document.getElementById('cardType');

        cardNumberInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            
            if (formattedValue.length > 19) {
                formattedValue = formattedValue.substring(0, 19);
            }
            
            e.target.value = formattedValue;
            
            // Detect card type
            const firstDigit = value.charAt(0);
            const firstTwoDigits = value.substring(0, 2);
            
            if (firstDigit === '4') {
                // Visa
                cardTypeIcon.innerHTML = '<img src="https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?q=80&w=32&auto=format&fit=crop" alt="Visa" class="w-8 h-5" onerror="this.src=\'https://images.unsplash.com/photo-1611224923853-80b023f02d71?q=80&w=32&auto=format&fit=crop\'; this.onerror=null;">';
            } else if (firstTwoDigits === '51' || firstTwoDigits === '52' || firstTwoDigits === '53' || firstTwoDigits === '54' || firstTwoDigits === '55') {
                // Mastercard
                cardTypeIcon.innerHTML = '<img src="https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=32&auto=format&fit=crop" alt="Mastercard" class="w-8 h-5" onerror="this.src=\'https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?q=80&w=32&auto=format&fit=crop\'; this.onerror=null;">';
            } else if (firstTwoDigits === '34' || firstTwoDigits === '37') {
                // American Express
                cardTypeIcon.innerHTML = '<img src="https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?q=80&w=32&auto=format&fit=crop" alt="Amex" class="w-8 h-5" onerror="this.src=\'https://images.unsplash.com/photo-1611224923853-80b023f02d71?q=80&w=32&auto=format&fit=crop\'; this.onerror=null;">';
            } else {
                cardTypeIcon.innerHTML = '<svg class="w-8 h-5 text-text-secondary" fill="currentColor" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2zm0 2v2h16V6H4zm0 4v8h16v-8H4z"/></svg>';
            }
        });

        // Expiry date formatting
        const expiryInput = document.getElementById('expiryDate');
        expiryInput.addEventListener('input', (e) => {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });

        // CVV input restriction
        const cvvInput = document.getElementById('cvv');
        cvvInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.replace(/\D/g, '');
        });

        // Form validation
        function validateCardNumber(number) {
            const cleanNumber = number.replace(/\s/g, '');
            return cleanNumber.length >= 13 && cleanNumber.length <= 19 && /^\d+$/.test(cleanNumber);
        }

        function validateExpiry(expiry) {
            const [month, year] = expiry.split('/');
            if (!month || !year) return false;
            
            const currentDate = new Date();
            const currentYear = currentDate.getFullYear() % 100;
            const currentMonth = currentDate.getMonth() + 1;
            
            const expMonth = parseInt(month);
            const expYear = parseInt(year);
            
            if (expMonth < 1 || expMonth > 12) return false;
            if (expYear < currentYear || (expYear === currentYear && expMonth < currentMonth)) return false;
            
            return true;
        }

        function validateCVV(cvv) {
            return cvv.length >= 3 && cvv.length <= 4 && /^\d+$/.test(cvv);
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
        }

        function hideError(elementId) {
            const errorElement = document.getElementById(elementId);
            errorElement.classList.add('hidden');
        }

        function showMessage(message, type = 'success') {
            const container = document.getElementById('messageContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `p-4 rounded-lg shadow-cinema-elevated transform transition-all duration-300 translate-x-full ${
                type === 'success' ? 'bg-success text-white' : 'bg-error text-white'
            }`;
            messageDiv.textContent = message;
            
            container.appendChild(messageDiv);
            
            // Animate in
            setTimeout(() => {
                messageDiv.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 5 seconds
            setTimeout(() => {
                messageDiv.classList.add('translate-x-full');
                setTimeout(() => {
                    container.removeChild(messageDiv);
                }, 300);
            }, 5000);
        }

        // Same as profile checkbox
        const sameAsProfileCheckbox = document.getElementById('sameAsProfile');
        const addressFields = ['address', 'city', 'state', 'zipCode', 'country'];

        sameAsProfileCheckbox.addEventListener('change', (e) => {
            if (e.target.checked) {
                // Auto-populate with profile data
                document.getElementById('address').value = '123 Main Street';
                document.getElementById('city').value = 'New York';
                document.getElementById('state').value = 'NY';
                document.getElementById('zipCode').value = '10001';
                document.getElementById('country').value = 'US';
                
                // Disable fields
                addressFields.forEach(field => {
                    document.getElementById(field).disabled = true;
                    document.getElementById(field).classList.add('opacity-60');
                });
            } else {
                // Enable fields
                addressFields.forEach(field => {
                    document.getElementById(field).disabled = false;
                    document.getElementById(field).classList.remove('opacity-60');
                });
            }
        });

        // Payment form submission
        document.getElementById('completePayment').addEventListener('click', (e) => {
            e.preventDefault();
            
            const activeForm = document.querySelector('#cardForm:not(.hidden), #walletForm:not(.hidden), #giftForm:not(.hidden)');
            const termsAccepted = document.getElementById('termsAccepted').checked;
            const submitBtn = document.getElementById('completePayment');
            const buttonText = document.getElementById('paymentButtonText');
            const spinner = document.getElementById('paymentSpinner');
            
            if (!termsAccepted) {
                showMessage('Please accept the Terms of Service and Privacy Policy', 'error');
                return;
            }
            
            let isValid = true;
            
            // Validate based on active form
            if (activeForm.id === 'cardForm') {
                const cardNumber = document.getElementById('cardNumber').value;
                const expiryDate = document.getElementById('expiryDate').value;
                const cvv = document.getElementById('cvv').value;
                const cardholderName = document.getElementById('cardholderName').value;
                
                // Reset errors
                hideError('cardNumberError');
                hideError('expiryError');
                hideError('cvvError');
                hideError('nameError');
                
                if (!validateCardNumber(cardNumber)) {
                    showError('cardNumberError', 'Please enter a valid card number');
                    isValid = false;
                }
                
                if (!validateExpiry(expiryDate)) {
                    showError('expiryError', 'Please enter a valid expiry date');
                    isValid = false;
                }
                
                if (!validateCVV(cvv)) {
                    showError('cvvError', 'Please enter a valid CVV');
                    isValid = false;
                }
                
                if (!cardholderName.trim()) {
                    showError('nameError', 'Please enter the cardholder name');
                    isValid = false;
                }
            }
            
            if (isValid) {
                // Show loading state
                submitBtn.disabled = true;
                buttonText.textContent = 'Processing Payment...';
                spinner.classList.remove('hidden');
                
                // Simulate payment processing
                setTimeout(() => {
                    showMessage('Payment successful! Redirecting to confirmation...');
                    setTimeout(() => {
                        window.location.href = 'booking_confirmation_tickets.html';
                    }, 1500);
                }, 3000);
            }
        });

        // Real-time validation
        cardNumberInput.addEventListener('blur', (e) => {
            if (e.target.value && !validateCardNumber(e.target.value)) {
                showError('cardNumberError', 'Please enter a valid card number');
            } else {
                hideError('cardNumberError');
            }
        });

        expiryInput.addEventListener('blur', (e) => {
            if (e.target.value && !validateExpiry(e.target.value)) {
                showError('expiryError', 'Please enter a valid expiry date');
            } else {
                hideError('expiryError');
            }
        });

        cvvInput.addEventListener('blur', (e) => {
            if (e.target.value && !validateCVV(e.target.value)) {
                showError('cvvError', 'Please enter a valid CVV');
            } else {
                hideError('cvvError');
            }
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>